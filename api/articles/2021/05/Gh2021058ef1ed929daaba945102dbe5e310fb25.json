{"title":"让独立子站支持更多的主题","slug":"2021/05/Gh2021058ef1ed929daaba945102dbe5e310fb25","date":"2021-05-19T09:22:45.000Z","updated":"2021-07-30T07:15:56.353Z","comments":true,"path":"api/articles/2021/05/Gh2021058ef1ed929daaba945102dbe5e310fb25.json","excerpt":null,"covers":["https://ssimg.frontenduse.top/article/2021/05/19/7e412fbd5381160cf4fdb862fe742508.png","https://ssimg.frontenduse.top/article/2021/05/19/95e82308c746d02153f0e0c245bd1653.png","https://ssimg.frontenduse.top/article/2021/05/19/f8695b69a7c33abc5177a14e1f8ae617.png","https://ssimg.frontenduse.top/article/2021/05/19/f6ed2ee14eb45b6bff47b80d4a548e4d.png","https://ssimg.frontenduse.top/article/2021/05/19/58dfe0d8a40d7df7e3fa641c9582875e.png","https://ssimg.frontenduse.top/article/2021/05/19/fadb8b50eef2d86892c158db76c6c8f2.png","https://ssimg.frontenduse.top/article/2021/05/19/4830e048521a1393cc5c0bed13dc044d.png","https://ssimg.frontenduse.top/article/2021/05/19/5a62a248a24c185c5892bed25a4fe2a3.png","https://ssimg.frontenduse.top/article/2021/05/19/8df9016e29808e11b8765c52fbc6aa2a.png"],"content":"<p>本文介绍了一种让独立子站支持高度可定制化的主题的方案。使用这个方案，构建独立子站时会从自定义的仓库里获取主题配置，<strong>所以特别适用于那些自己 Fork 了一份主题进行修改的场景</strong>，摸索期间也并不需要推到 <code>npm</code> 造成主题名和版本混淆，也能在小范围内传播魔改主题。</p>\n<p>如果是想直接使用各种 Hexo 社区内的主题，不需要修改，可以参考 <a href=\"https://matataki.io/p/8927\">这篇文章</a> 介绍的方法。</p>\n<p>创建子站教程见：</p>\n<iframe width=\"100%\" height=\"180\" src='https://matataki.io/widget/?id=8864&invite=12458&referral=12458' frameborder=0></iframe>\n\n<p>在创建成功之后，我们到我们自己对应的 Github Repo,<br>比如我的是： <a href=\"https://github.com/whyouare111/indieblog3\">https://github.com/whyouare111/indieblog3</a></p>\n<p><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/7e412fbd5381160cf4fdb862fe742508.png\" alt=\"image.png\"></p>\n<p>点开第一个 <code>.github/workflows</code></p>\n<p><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/95e82308c746d02153f0e0c245bd1653.png\" alt=\"image.png\"></p>\n<p>点开 <code>pages.yml</code>,默认内容应该符合如下格式：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">source</span>  <span class=\"comment\"># default branch</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">pages:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Use</span> <span class=\"string\">Node.js</span> <span class=\"number\">12.</span><span class=\"string\">x</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v1</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&#x27;12.x&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Cache</span> <span class=\"string\">NPM</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/cache@v2</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">path:</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\">          <span class=\"attr\">key:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">runner.OS</span> <span class=\"string\">&#125;&#125;-npm-cache</span></span><br><span class=\"line\">          <span class=\"attr\">restore-keys:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class=\"line\"><span class=\"string\"></span>      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">build</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">peaceiris/actions-gh-pages@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITHUB_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">publish_dir:</span> <span class=\"string\">./public</span></span><br><span class=\"line\">          <span class=\"attr\">publish_branch:</span> <span class=\"string\">main</span>  <span class=\"comment\"># deploying branch</span></span><br></pre></td></tr></table></figure>\n<p>其中 <code>steps</code> 就是建站工作流的各个步骤了</p>\n<p>点击铅笔图标编辑<br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/f8695b69a7c33abc5177a14e1f8ae617.png\" alt=\"image.png\"></p>\n<p>在 <code>      - name: Install Dependencies</code> 这一行之间加上配置</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Theme</span></span><br><span class=\"line\">  <span class=\"attr\">run:</span> <span class=\"string\">git</span> <span class=\"string\">clone</span> <span class=\"string\">-b</span> <span class=\"string\">indieblog</span> <span class=\"string\">https://github.com/whyouare111/hexo-theme-cactus.git</span> <span class=\"string\">themes/cactus</span></span><br></pre></td></tr></table></figure>\n\n<p>变成</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">Pages</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">source</span>  <span class=\"comment\"># default branch</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">pages:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Use</span> <span class=\"string\">Node.js</span> <span class=\"number\">12.</span><span class=\"string\">x</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v1</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&#x27;12.x&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Cache</span> <span class=\"string\">NPM</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/cache@v2</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">path:</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\">          <span class=\"attr\">key:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">runner.OS</span> <span class=\"string\">&#125;&#125;-npm-cache</span></span><br><span class=\"line\">          <span class=\"attr\">restore-keys:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class=\"line\"><span class=\"string\"></span>      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Theme</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">git</span> <span class=\"string\">clone</span> <span class=\"string\">-b</span> <span class=\"string\">indieblog</span> <span class=\"string\">https://github.com/whyouare111/hexo-theme-cactus.git</span> <span class=\"string\">themes/cactus</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">build</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">peaceiris/actions-gh-pages@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITHUB_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">publish_dir:</span> <span class=\"string\">./public</span></span><br><span class=\"line\">          <span class=\"attr\">publish_branch:</span> <span class=\"string\">main</span>  <span class=\"comment\"># deploying branch</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>注意缩进（空格数）要和其他 <code>-name</code> <code>run</code> 的配置一致<br>修改好之后<br>点击右上角的 【Start commit】,【Commit changes】<br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/f6ed2ee14eb45b6bff47b80d4a548e4d.png\" alt=\"image.png\"></p>\n<p>回到 Repo 视图，打开 <code>_config.yml</code>, 把 <code>theme</code> 配置修改成 <code>cactus</code><br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/58dfe0d8a40d7df7e3fa641c9582875e.png\" alt=\"image.png\"></p>\n<p>修改完后点 【Commit changes】提交<br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/fadb8b50eef2d86892c158db76c6c8f2.png\" alt=\"image.png\"></p>\n<p>这样等待站点重新构建好之后，主题就已经换了</p>\n<p><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/4830e048521a1393cc5c0bed13dc044d.png\" alt=\"image.png\"></p>\n<p>但是我们会发现这个主题还没有适配好，体现为：</p>\n<ul>\n<li>Logo / Icon 都是默认的</li>\n<li>各种社交链接不是指向自己希望的页面</li>\n<li>关于 / 项目页还是空的</li>\n</ul>\n<p>这是因为这都是主题的专属配置，需要专门的配置文件 <code>_config.cactus.yml</code>。<br><code>cactus</code> 就是我们的主题名，其他主题换成对应的名字就行</p>\n<p>我们可以在 Github 上直接增加这个文件<br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/5a62a248a24c185c5892bed25a4fe2a3.png\" alt=\"image.png\"></p>\n<p>内容如下</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">nav:</span></span><br><span class=\"line\">  <span class=\"attr\">home:</span> <span class=\"string\">/</span></span><br><span class=\"line\">  <span class=\"attr\">articles:</span> <span class=\"string\">/archives/</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"attr\">social_links:</span></span><br><span class=\"line\">  <span class=\"attr\">github:</span> <span class=\"string\">http://github.com/whyouare111</span></span><br><span class=\"line\">  <span class=\"attr\">mail:</span> <span class=\"string\">mailto:whyouare556@protonmail.com</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">colorscheme:</span> <span class=\"string\">&quot;dark&quot;</span></span><br></pre></td></tr></table></figure>\n<p><code>nav</code> 是菜单，极简情况下这样就可以了<br> <code>social_links</code> 列出自己现有的社交媒体链接，配置好之后就可以把独立子站地址作为自己在互联网上的通用链接，也能引导大家到自己在各种主流社交媒体的账号上。使用这个模式即使某个社交平台的账号不想用/不可用了，自己的站点还是在的。</p>\n<p>除了<code>github</code> <code>mail</code> 之外还支持很多种，是根据<a href=\"https://fontawesome.com/icons?d=gallery&s=brands\">Font Awesome icon</a>来的。试试找 <code>weibo</code> <code>weixin</code> <code>twitter</code> <code>facebook</code> <code>medium</code> <code>telegram</code> 等，都支持。更偏向个人使用的<code>wordpress</code> <code>mastodon</code> 等也是有的</p>\n<p>填写好内容之后 【Commit changes】提交，等待重新构建</p>\n<p><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/8df9016e29808e11b8765c52fbc6aa2a.png\" alt=\"image.png\"></p>\n<p>这样站点就是展现自己维护的菜单和链接了</p>\n","more":"<p>本文介绍了一种让独立子站支持高度可定制化的主题的方案。使用这个方案，构建独立子站时会从自定义的仓库里获取主题配置，<strong>所以特别适用于那些自己 Fork 了一份主题进行修改的场景</strong>，摸索期间也并不需要推到 <code>npm</code> 造成主题名和版本混淆，也能在小范围内传播魔改主题。</p>\n<p>如果是想直接使用各种 Hexo 社区内的主题，不需要修改，可以参考 <a href=\"https://matataki.io/p/8927\">这篇文章</a> 介绍的方法。</p>\n<p>创建子站教程见：</p>\n<iframe width=\"100%\" height=\"180\" src='https://matataki.io/widget/?id=8864&invite=12458&referral=12458' frameborder=0></iframe>\n\n<p>在创建成功之后，我们到我们自己对应的 Github Repo,<br>比如我的是： <a href=\"https://github.com/whyouare111/indieblog3\">https://github.com/whyouare111/indieblog3</a></p>\n<p><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/7e412fbd5381160cf4fdb862fe742508.png\" alt=\"image.png\"></p>\n<p>点开第一个 <code>.github/workflows</code></p>\n<p><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/95e82308c746d02153f0e0c245bd1653.png\" alt=\"image.png\"></p>\n<p>点开 <code>pages.yml</code>,默认内容应该符合如下格式：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">source</span>  <span class=\"comment\"># default branch</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">pages:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Use</span> <span class=\"string\">Node.js</span> <span class=\"number\">12.</span><span class=\"string\">x</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v1</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&#x27;12.x&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Cache</span> <span class=\"string\">NPM</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/cache@v2</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">path:</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\">          <span class=\"attr\">key:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">runner.OS</span> <span class=\"string\">&#125;&#125;-npm-cache</span></span><br><span class=\"line\">          <span class=\"attr\">restore-keys:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class=\"line\"><span class=\"string\"></span>      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">build</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">peaceiris/actions-gh-pages@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITHUB_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">publish_dir:</span> <span class=\"string\">./public</span></span><br><span class=\"line\">          <span class=\"attr\">publish_branch:</span> <span class=\"string\">main</span>  <span class=\"comment\"># deploying branch</span></span><br></pre></td></tr></table></figure>\n<p>其中 <code>steps</code> 就是建站工作流的各个步骤了</p>\n<p>点击铅笔图标编辑<br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/f8695b69a7c33abc5177a14e1f8ae617.png\" alt=\"image.png\"></p>\n<p>在 <code>      - name: Install Dependencies</code> 这一行之间加上配置</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Theme</span></span><br><span class=\"line\">  <span class=\"attr\">run:</span> <span class=\"string\">git</span> <span class=\"string\">clone</span> <span class=\"string\">-b</span> <span class=\"string\">indieblog</span> <span class=\"string\">https://github.com/whyouare111/hexo-theme-cactus.git</span> <span class=\"string\">themes/cactus</span></span><br></pre></td></tr></table></figure>\n\n<p>变成</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">Pages</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">source</span>  <span class=\"comment\"># default branch</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">pages:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Use</span> <span class=\"string\">Node.js</span> <span class=\"number\">12.</span><span class=\"string\">x</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v1</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&#x27;12.x&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Cache</span> <span class=\"string\">NPM</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/cache@v2</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">path:</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\">          <span class=\"attr\">key:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">runner.OS</span> <span class=\"string\">&#125;&#125;-npm-cache</span></span><br><span class=\"line\">          <span class=\"attr\">restore-keys:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class=\"line\"><span class=\"string\"></span>      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Theme</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">git</span> <span class=\"string\">clone</span> <span class=\"string\">-b</span> <span class=\"string\">indieblog</span> <span class=\"string\">https://github.com/whyouare111/hexo-theme-cactus.git</span> <span class=\"string\">themes/cactus</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">build</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">peaceiris/actions-gh-pages@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITHUB_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">publish_dir:</span> <span class=\"string\">./public</span></span><br><span class=\"line\">          <span class=\"attr\">publish_branch:</span> <span class=\"string\">main</span>  <span class=\"comment\"># deploying branch</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>注意缩进（空格数）要和其他 <code>-name</code> <code>run</code> 的配置一致<br>修改好之后<br>点击右上角的 【Start commit】,【Commit changes】<br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/f6ed2ee14eb45b6bff47b80d4a548e4d.png\" alt=\"image.png\"></p>\n<p>回到 Repo 视图，打开 <code>_config.yml</code>, 把 <code>theme</code> 配置修改成 <code>cactus</code><br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/58dfe0d8a40d7df7e3fa641c9582875e.png\" alt=\"image.png\"></p>\n<p>修改完后点 【Commit changes】提交<br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/fadb8b50eef2d86892c158db76c6c8f2.png\" alt=\"image.png\"></p>\n<p>这样等待站点重新构建好之后，主题就已经换了</p>\n<p><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/4830e048521a1393cc5c0bed13dc044d.png\" alt=\"image.png\"></p>\n<p>但是我们会发现这个主题还没有适配好，体现为：</p>\n<ul>\n<li>Logo / Icon 都是默认的</li>\n<li>各种社交链接不是指向自己希望的页面</li>\n<li>关于 / 项目页还是空的</li>\n</ul>\n<p>这是因为这都是主题的专属配置，需要专门的配置文件 <code>_config.cactus.yml</code>。<br><code>cactus</code> 就是我们的主题名，其他主题换成对应的名字就行</p>\n<p>我们可以在 Github 上直接增加这个文件<br><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/5a62a248a24c185c5892bed25a4fe2a3.png\" alt=\"image.png\"></p>\n<p>内容如下</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">nav:</span></span><br><span class=\"line\">  <span class=\"attr\">home:</span> <span class=\"string\">/</span></span><br><span class=\"line\">  <span class=\"attr\">articles:</span> <span class=\"string\">/archives/</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"attr\">social_links:</span></span><br><span class=\"line\">  <span class=\"attr\">github:</span> <span class=\"string\">http://github.com/whyouare111</span></span><br><span class=\"line\">  <span class=\"attr\">mail:</span> <span class=\"string\">mailto:whyouare556@protonmail.com</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">colorscheme:</span> <span class=\"string\">&quot;dark&quot;</span></span><br></pre></td></tr></table></figure>\n<p><code>nav</code> 是菜单，极简情况下这样就可以了<br> <code>social_links</code> 列出自己现有的社交媒体链接，配置好之后就可以把独立子站地址作为自己在互联网上的通用链接，也能引导大家到自己在各种主流社交媒体的账号上。使用这个模式即使某个社交平台的账号不想用/不可用了，自己的站点还是在的。</p>\n<p>除了<code>github</code> <code>mail</code> 之外还支持很多种，是根据<a href=\"https://fontawesome.com/icons?d=gallery&s=brands\">Font Awesome icon</a>来的。试试找 <code>weibo</code> <code>weixin</code> <code>twitter</code> <code>facebook</code> <code>medium</code> <code>telegram</code> 等，都支持。更偏向个人使用的<code>wordpress</code> <code>mastodon</code> 等也是有的</p>\n<p>填写好内容之后 【Commit changes】提交，等待重新构建</p>\n<p><img src=\"https://ssimg.frontenduse.top/article/2021/05/19/8df9016e29808e11b8765c52fbc6aa2a.png\" alt=\"image.png\"></p>\n<p>这样站点就是展现自己维护的菜单和链接了</p>\n","categories":[],"tags":[]}